<tool id="filterHD_3" name="filterHD 3 - BAF" version="0.1.0">

    <stdio>
        <exit_code range="1:" />
    </stdio>
	
	<requirements>
		<container type="docker">clonehd:smchet</container>
	</requirements>
	
	<command>
	<![CDATA[
	/opt/cloneHD/build/filterHD 
	--data ${baf} --mode ${mode} --pre ${sample_type}.baf 
	--sigma ${sigma} --jumps ${jumps}
	--reflect ${reflect} --dist ${dist}
	]]>
	</command>

	<inputs>
	    <param name="sample_type" type="select" label="Type of sample">
	        <option value="tumor">Tumor</option>
	        <option value="normal">Normal</option>
	    </param>
		<param format="tabular" name="baf" type="data" label="B-allele read count data file" help=""/>
		<param type="integer" name="mode" label="Mode" help="" value="1"/>
		<param type="float" name="sigma" label="Diffusion constant sigma" help="" value="0"/>
		<param type="float" name="jumps" label="Jump probability" help="" value="1"/>
		<param type="integer" name="reflect" label="Reflect" help="" value="1"/>
		<param type="integer" name="dist" label="Dist" help="" value="1"/>
	</inputs>

	<outputs>
		<data format="tabular" name="baf_jumps" type="data" label="tumor.baf.jumps.txt"/>
		<data format="tabular" name="baf_posterior" type="data" label="tumor.baf.posterior-1.txt"/>
	</outputs>

	<help>
	    The tumor BAF data is analysed, mainly to get the emission parameters (shape, rnd) and jumps. In principle, there could be jumps
	    visible in the BAF data, but not in the read depth (copy number neutral LOH within chromosomes). Diffusion should be switched off.
	</help>

</tool>

