<tool id="cloneHD_input" name="cloneHD - Tool Input Prep" version="0.1.0">
  <stdio>
    <exit_code range="1:" />
  </stdio>
  <requirements>
    <container type="docker">clonehd:smchet</container>
  </requirements>
  <command>
    <![CDATA[
    python /opt/cloneHD-tools/clonehd/snv_parser.py
    --output-snvs ${output_snvs}
    --variant-type ${snv_type}
    ${vcf_file};
    python /opt/cloneHD-tools/clonehd/cna_parser.py
    -f ${cna_type} -c ${purity}
    --mean-tcn ${output_mean_tcn}
    --avail-cn ${output_avail_cn}
    ${cna_file}
    ]]>
    <!-- perl /opt/cloneHD-tools/clonehd/intersect_SNV_with_cn_prior.pl
    -c ${sample}-avail-cn.txt.cg
    -s ${sample}.snv.txt > ${sample}.snv.cn.txt -->
  </command>
  <inputs>
        <param name="cna_type" value="Copy Number Input Type" type="select">
            <option value="battenberg-smchet" selected="True">Battenberg</option>
        </param>
        <param name="cna_file" type="data" format="tabular" optional="false" help="CNA prior from Battenberg file"/>
        <param name="purity" type="float" optional="false" help="Purity from Battenberg file" value="1.0"/>
        <param name="only_normal_cn" type="boolean" label="Only report CN regions" help="Only output variants lying in normal CN regions. Do not output CNA data directly."/>
        <param name="snv_type" value="Variant Input Type" type="select">
            <option value="mutect_smchet" selected="True">MuTect</option>
        </param>
        <param name="vcf_file" type="data" format="vcf" help="Variant File"/>
	<param name="gender" value="Gender" type="select" help="">
            <option value="male" selected="True">Male</option>
            <option value="female" selected="False">Female</option>
	</param>
  </inputs>
  <outputs>
        <data format="tabular" name="output_mean_tcn" label="Mean total copy number for cloneHD"/>
	<data format="tabular" name="output_avail_cn" label="Available copy number for cloneHD"/>
        <data format="tabular" name="output_snvs" label="SNVs for cloneHD"/>
  </outputs>
  <help>
	  Create cloneHD/filterHD input from VCFs and Battenberg calls.
  </help>
</tool>
